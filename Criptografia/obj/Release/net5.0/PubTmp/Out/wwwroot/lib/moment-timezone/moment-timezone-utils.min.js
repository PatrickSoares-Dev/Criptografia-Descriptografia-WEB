!function(n,t){"use strict";"object"==typeof module&&module.exports?module.exports=t(require("./")):"function"==typeof define&&define.amd?define(["moment"],t):t(n.moment)}(this,function(n){"use strict";if(!n.tz)throw new Error("moment-timezone-utils.js must be loaded after moment-timezone.js");var s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX",i=1e-6;function a(n,t){for(var r="",e=Math.abs(n),o=Math.floor(e),e=function(n,t){for(var r,e=".",o="";0<t;)--t,n*=60,r=Math.floor(n+i),e+=s[r],n-=r,r&&(o+=e,e="");return o}(e-o,Math.min(~~t,10));0<o;)r=s[o%60]+r,o=Math.floor(o/60);return(r=n<0?"-"+r:r)&&e?r+e:(e||"-"!==r)&&(r||e)||"0"}function f(n){var t=n;if(!t.name)throw new Error("Missing name");if(!t.abbrs)throw new Error("Missing abbrs");if(!t.untils)throw new Error("Missing untils");if(!t.offsets)throw new Error("Missing offsets");if(t.offsets.length!==t.untils.length||t.offsets.length!==t.abbrs.length)throw new Error("Mismatched array lengths");return[n.name,function(n){for(var t,r=0,e=[],o=[],s=[],i={},u=0;u<n.abbrs.length;u++)void 0===i[t=n.abbrs[u]+"|"+n.offsets[u]]&&(e[i[t]=r]=n.abbrs[u],o[r]=a(Math.round(60*n.offsets[u])/60,1),r++),s[u]=a(i[t],0);return e.join(" ")+"|"+o.join(" ")+"|"+s.join("")}(n),function(n){for(var t=[],r=0,e=0;e<n.length-1;e++)t[e]=a(Math.round((n[e]-r)/1e3)/60,1),r=n[e];return t.join(" ")}(n.untils),function(n){if(!n)return"";if(n<1e3)return n;var t=String(0|n).length-2;return Math.round(n/Math.pow(10,t))+"e"+t}(n.population)].join("|")}function l(n){return[n.name,n.zones.join(" ")].join("|")}function c(n,t){var r;if(n.length!==t.length)return!1;for(r=0;r<n.length;r++)if(n[r]!==t[r])return!1;return!0}function o(n,t,r,e){for(var o,s,i,u,a,f,l,h=[],p=0;p<n.length;p++){for(a=!1,s=n[p],o=0;o<h.length;o++)i=(u=h[o])[0],l=i,c((f=s).offsets,l.offsets)&&c(f.abbrs,l.abbrs)&&c(f.untils,l.untils)&&(s.population>i.population||s.population===i.population&&e&&e[s.name]?u.unshift(s):u.push(s),a=!0);a||h.push([s])}for(p=0;p<h.length;p++)for(u=h[p],t.push(u[0]),o=1;o<u.length;o++)r.push(u[0].name+"|"+u[o].name)}function h(n,t){var r=[],e=[];return n.links&&(e=n.links.slice()),o(n.zones,r,e,t),{version:n.version,zones:r,links:e.sort()}}function p(n,t,r){var e=Array.prototype.slice,t=function(n,t,r){var e,o,s=0,i=n.length+1;for((r=r||t)<t&&(o=t,t=r,r=o),o=0;o<n.length;o++)null!=n[o]&&((e=new Date(n[o]).getUTCFullYear())<t&&(s=o+1),r<e&&(i=Math.min(i,o+1)));return[s,i]}(n.untils,t,r),r=e.apply(n.untils,t);return r[r.length-1]=null,{name:n.name,abbrs:e.apply(n.abbrs,t),untils:r,offsets:e.apply(n.offsets,t),population:n.population,countries:n.countries}}return n.tz.pack=f,n.tz.packBase60=a,n.tz.createLinks=h,n.tz.filterYears=p,n.tz.filterLinkPack=function(n,t,r,e){for(var o,s=n.zones,i=[],u=0;u<s.length;u++)i[u]=p(s[u],t,r);for(o=h({zones:i,links:n.links.slice(),version:n.version},e),u=0;u<o.zones.length;u++)o.zones[u]=f(o.zones[u]);return o.countries=n.countries?n.countries.map(l):[],o},n.tz.packCountry=l,n});